(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(41)},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),s=a(2),o=a(4),m=a.n(o),i=a(12),u=function(e){var t=e.msg,a=e.type,n=void 0===a?"info":a;return r.a.createElement("div",{className:"alert alert-".concat(n," alert-dismissible fade show"),role:"alert"},t,r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")))},d=function(e){var t=e.percentage;return r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar progress-bar-striped bg-info",role:"progressbar",style:{width:"".concat(t,"%")}},t,"%"))},p=a(13),E=a.n(p),f=function(e){var t=e.isProcessing,a=e.setProcessing,c=Object(n.useState)(""),l=Object(s.a)(c,2),o=l[0],p=l[1],f=Object(n.useState)("Choose File"),b=Object(s.a)(f,2),g=b[0],h=b[1],v=Object(n.useState)(!1),w=Object(s.a)(v,2),y=w[0],N=w[1],x=Object(n.useState)(""),O=Object(s.a)(x,2),j=O[0],P=O[1],S=Object(n.useState)(0),k=Object(s.a)(S,2),F=k[0],R=k[1],C=function(e){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(e).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))},U=function(){var e=Object(i.a)(m.a.mark(function e(t){var n,r,c,l,s,i,u,d,p;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Submitting "),t.preventDefault(),(n=new FormData).append("file",o),r=C("user_secret"),c=C("refund_type"),l=C("reason"),!(r&&l&&c)){e.next=23;break}return e.prev=8,e.next=11,E.a.post("/upload?user_secret=".concat(r,"&reason=").concat(l,"&refund_type=").concat(c),n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){R(parseInt(Math.round(100*e.loaded/e.total))),R(0),a(!0)}});case 11:s=e.sent,i=s.data,u=i.fileName,d=i.filePath,p=i.data,console.log({data:s.data}),a(!1),N({fileName:u,filePath:d,data:p}),P("File Uploaded Processing request"),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(8),a(!1),P("There was a problem with the server");case 23:case"end":return e.stop()}},e,null,[[8,19]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,t?r.a.createElement("div",{className:"h-100 w-100 d-flex justify-content-center align-content-center"},r.a.createElement("div",{class:"spinner-border text-primary",role:"status"},r.a.createElement("span",{class:"sr-only"},"Loading..."))):r.a.createElement(n.Fragment,null,j.msg?r.a.createElement(u,{msg:j.msg}):null,r.a.createElement("form",{onSubmit:U},r.a.createElement("div",{className:"custom-file mb-4"},r.a.createElement("input",{type:"file",accept:".csv",className:"custom-file-input",id:"customFile",onChange:function(e){p(e.target.files[0]),h(e.target.files[0].name)}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},g)),r.a.createElement(d,{percentage:F}),r.a.createElement("input",{disabled:"string"==typeof o,type:"submit",value:"Upload",className:"btn btn-primary btn-block mt-4"})),y?r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-md-6 m-auto"},r.a.createElement("h2",{className:"text-center"},"Report"),r.a.createElement("h4",{className:"text-center text-muted text-".concat(200==y.data.status?"info":"danger")},200==y.data.status?"Everything worked successfully":"Error on the server please reach out to Leigh or Vaval "),r.a.createElement("h6",{className:"text-center text-muted"},(new Date).toLocaleDateString()),r.a.createElement("span",{className:"text-muted mt-2"},"Save Report coming soon"),r.a.createElement("table",{class:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Order number"),r.a.createElement("th",{scope:"col"},"Result"),r.a.createElement("th",{scope:"col"},"Reason"),r.a.createElement("th",{scope:"col"},"Refunded"))),r.a.createElement("tbody",null,y.data.report.map(function(e){return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},e.order),r.a.createElement("td",null,e.msg),r.a.createElement("td",null,e.reason),r.a.createElement("td",null,e.type),r.a.createElement("td",null,r.a.createElement("i",{className:"fa-".concat(e.refunded?"check text-success":"times text-danger")})),r.a.createElement("td",null," ",r.a.createElement("a",{href:e.url},"View Order")))}))),r.a.createElement("h3",{className:"text-center"},y.fileName),r.a.createElement("img",{style:{width:"100%"},src:y.filePath,alt:""}))):null))},b=(a(40),function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"container mt-4"},r.a.createElement("h4",{className:"display-4 text-center mb-4"},a?"Processing your request, get some \u2615\ufe0f":" Click below to upload a csv"),r.a.createElement(f,{isProcessing:a,setProcessing:c}))});l.a.render(r.a.createElement(b,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.df255b62.chunk.js.map